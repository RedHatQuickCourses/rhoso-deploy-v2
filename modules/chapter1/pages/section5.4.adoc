= Troubleshoot the OpenStack Control Plane

. Check the pods status
+
[source,bash,role=execute]
----
oc get pods -n openstack
----

. If you see any of the pods staying in `pending` state for logn check pod's logs.
+
.Example:
----
oc logs openstack-galera-0
----

. For further investigation you may describe the pod in question to see any hint about the problem there.
+
.Example:
----
oc describe pod openstack-galera-0
----
+
In the output of the abobe command, scroll down at the bottom to check the events generated by the pod.

. You may alos try attaching to the pod's shell for further investigation on any pod related issue.
+
.Example:
----
oc rsh openstack-galera-0
----

. Check running jobs for openstack control plane deployment.
+
[source,bash,role=execute]
----
oc get jobs
----
+
.Sample output
----
NAME                 COMPLETIONS   DURATION   AGE
glance-db-create     1/1           6s         66s
glance-db-sync       1/1           22s        56s
keystone-bootstrap   0/1           1s         1s
keystone-db-create   1/1           6s         37s
keystone-db-sync     1/1           16s        27s
neutron-db-create    1/1           4s         38s
----

. To track the progress or troubleshoot, you may check the logs for the job which is not completed.
+
.Example:
----
oc logs job/keystone-bootstrap
----

*You may need to re-deploy the control plane if you identify any problem with your configuration.*

. Delete the current deployment

. Make desired changed in the deployment configuration file.

. Make sure all the resources of the deployment are cleaned up.
+
[source,bash,role=execute]
----
oc get openstackcontrolplane -n openstack
oc get all -n openstack
oc get pods -n openstack
oc get pvc -n openstack
----

. Delete any of the resource left back after deletion of controlplane configuration.

. Re-run deployment by applying configuration

. Check again for the status of openstack control plane deployment.
+
[source,bash,role=execute]
----
oc get openstackcontrolplane -n openstack
----

. Repeat the query until MESSAGE is Setup complete
+
.Sample Output
----
NAME                                 STATUS   MESSAGE
openstack-galera-network-isolation   True     Setup complete
----



FIXME: short explanation  for disabling swift, designate, redis, barbican


INFORMATION: Sample configuration files in the form of Validated Architectures (VAs) may be provided as Feature Pack after release of RHOSP18.
These will be made available in the form of kustomize YAML files.
Kustomize is a Kubernetes-native deployment tool that enables customization of YAML files without altering the original. 
It simplifies resource configuration by allowing base templates to be customized with user data, eliminating the need to write manifests from scratch. 
This abstraction streamlines resource management, enabling users to focus solely on relevant details without requiring full knowledge of Kubernetes YAML structures.
